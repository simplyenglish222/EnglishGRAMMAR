<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>BINGO: —Å–ª–æ–≤–∞ –Ω–∞ TH ‚Äî –≥–ª—É—Ö–æ–π [Œ∏] vs –∑–≤–æ–Ω–∫–∏–π [√∞]</title>
<style>
  :root{
    --bg:#f7f4ee; --ink:#111; --muted:#6b6b6b;
    --voiceless:#2e6fce; --voiced:#e07a17;
    --cell:#fff; --mark:#b2f7c1; --border:#dedede; --shadow:rgba(0,0,0,.06);
  }
  html,body{height:100%}
  body{
    margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Inter,Arial,sans-serif;
    background:var(--bg); color:var(--ink);
    display:flex; flex-direction:column; gap:16px;
  }
  header{padding:16px 20px}
  h1{margin:0 0 6px;font-size:clamp(20px,3.2vw,32px);line-height:1.15}
  .sub{color:var(--muted); font-size:14px}
  .controls{
    display:flex; flex-wrap:wrap; gap:10px 14px; align-items:center;
    padding:0 20px 6px;
  }
  .controls label{font-size:14px; color:#222}
  .controls select, .controls input[type="range"], .controls button{
    padding:8px 10px; border-radius:10px; border:1px solid var(--border); background:#fff;
    box-shadow:0 1px 0 var(--shadow); font-size:14px;
  }
  .controls button{cursor:pointer}
  .legend{margin-left:auto; display:flex; gap:10px; align-items:center; font-size:13px; color:#333}
  .dot{width:12px; height:12px; border-radius:3px; display:inline-block; margin-right:6px}
  .dot.voiceless{background:var(--voiceless)}
  .dot.voiced{background:var(--voiced)}
  .board{
    margin:0 auto 24px; width:min(92vw,780px);
    display:grid; grid-template-columns:repeat(5,1fr); grid-auto-rows:minmax(88px,1fr);
    gap:10px; padding:0 20px;
  }
  .cell{
    position:relative;
    display:flex; align-items:center; justify-content:center; text-align:center;
    background:var(--cell); border:1px solid var(--border); border-radius:16px;
    font-weight:600; font-size:clamp(16px,2.8vw,22px);
    padding:8px; cursor:pointer; user-select:none;
    box-shadow:0 3px 8px var(--shadow);
    transition:transform .05s ease, background .2s ease, box-shadow .2s ease;
  }
  .cell:hover{transform:translateY(-1px)}
  .cell.voiceless{outline:3px solid color-mix(in srgb, var(--voiceless) 40%, transparent)}
  .cell.voiced{outline:3px solid color-mix(in srgb, var(--voiced) 40%, transparent)}
  .cell.marked{background:var(--mark)}
  .cell .small{font-size:.55em; font-weight:700; color:var(--muted); position:absolute; top:8px; right:10px}
  .footer{padding:0 20px 20px; color:var(--muted); font-size:13px}
  @media (max-width:520px){ .board{grid-auto-rows:minmax(68px,1fr)} }
</style>
</head>
<body>
<header>
  <h1>BINGO: —Å–ª–æ–≤–∞ –Ω–∞ TH ‚Äî –≥–ª—É—Ö–æ–π [Œ∏] vs –∑–≤–æ–Ω–∫–∏–π [√∞]</h1>
  <div class="sub">–ù–∞–∂–∏–º–∞–π—Ç–µ –Ω–∞ –∫–ª–µ—Ç–∫—É ‚Äî —É—Å–ª—ã—à–∏—Ç–µ —Å–ª–æ–≤–æ. –õ–µ–≤–æ–π –∫–Ω–æ–ø–∫–æ–π: –æ–∑–≤—É—á–∏—Ç—å –∏ –ø–æ–º–µ—Ç–∏—Ç—å. –ü—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π: —Ç–æ–ª—å–∫–æ –ø–æ–º–µ—Ç–∏—Ç—å.</div>
</header>

<section class="controls" aria-label="–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∑–≤—É—á–∫–∏">
  <label>–ì–æ–ª–æ—Å:
    <select id="voice"></select>
  </label>
  <label>–°–∫–æ—Ä–æ—Å—Ç—å:
    <input id="rate" type="range" min="0.7" max="1.3" step="0.05" value="1">
  </label>
  <label>–í—ã—Å–æ—Ç–∞:
    <input id="pitch" type="range" min="0.7" max="1.3" step="0.05" value="1">
  </label>
  <button id="test">üîä –¢–µ—Å—Ç</button>
  <button id="shuffle">üîÅ –ü–µ—Ä–µ–º–µ—à–∞—Ç—å</button>
  <button id="reset">‚ôªÔ∏è –°–±—Ä–æ—Å–∏—Ç—å –ø–æ–º–µ—Ç–∫–∏</button>
  <div class="legend" aria-hidden="true">
    <span class="dot voiceless"></span> [Œ∏]
    <span class="dot voiced" style="margin-left:12px"></span> [√∞]
  </div>
</section>

<main class="board" id="board" role="grid" aria-label="–ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ –ë–∏–Ω–≥–æ"></main>

<div class="footer">
  –ï—Å–ª–∏ –æ–∑–≤—É—á–∫–∞ –º–æ–ª—á–∏—Ç: –Ω–∞–∂–º–∏—Ç–µ ¬´–¢–µ—Å—Ç¬ª, –∑–∞—Ç–µ–º –≤—ã–±–µ—Ä–∏—Ç–µ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –≥–æ–ª–æ—Å –≤ —Å–ø–∏—Å–∫–µ. –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö –≥–æ–ª–æ—Å–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.
</div>

<script>
  // ‚Äî‚Äî‚Äî‚Äî‚Äî –°–ª–æ–≤–∞ (–≤—Å–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –Ω–∞ TH) ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
  const WORDS = [
    // –ó–≤–æ–Ω–∫–∏–π [√∞]
    {w:"the", s:"voiced"}, {w:"this", s:"voiced"}, {w:"that", s:"voiced"},
    {w:"these", s:"voiced"}, {w:"those", s:"voiced"}, {w:"there", s:"voiced"},
    {w:"their", s:"voiced"}, {w:"them", s:"voiced"}, {w:"they", s:"voiced"},
    {w:"then", s:"voiced"}, {w:"than", s:"voiced"}, {w:"though", s:"voiced"},
    // –ì–ª—É—Ö–æ–π [Œ∏]
    {w:"think", s:"voiceless"}, {w:"thin", s:"voiceless"}, {w:"thick", s:"voiceless"},
    {w:"three", s:"voiceless"}, {w:"thousand", s:"voiceless"}, {w:"Thursday", s:"voiceless"},
    {w:"theatre", s:"voiceless"}, {w:"thought", s:"voiceless"}, {w:"thorough", s:"voiceless"},
    {w:"throat", s:"voiceless"}, {w:"thumb", s:"voiceless"}, {w:"thunder", s:"voiceless"},
    {w:"throw", s:"voiceless"}
  ]; // –∏—Ç–æ–≥–æ 25

  const BOARD = document.getElementById('board');

  // ‚Äî‚Äî‚Äî‚Äî‚Äî SpeechSynthesis ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
  const voiceSelect = document.getElementById('voice');
  const rate = document.getElementById('rate');
  const pitch = document.getElementById('pitch');
  const testBtn = document.getElementById('test');
  const shuffleBtn = document.getElementById('shuffle');
  const resetBtn = document.getElementById('reset');

  function populateVoices(){
    const voices = window.speechSynthesis.getVoices();
    voiceSelect.innerHTML = "";
    const sorted = voices.slice().sort((a,b)=>{
      const ae = a.lang.startsWith('en') ? -1 : 1;
      const be = b.lang.startsWith('en') ? -1 : 1;
      if (ae !== be) return ae - be;
      return a.name.localeCompare(b.name);
    });
    sorted.forEach(v=>{
      const opt = document.createElement('option');
      opt.value = v.name; opt.textContent = `${v.name} (${v.lang})`;
      voiceSelect.appendChild(opt);
    });
    const saved = localStorage.getItem('th-bingo-voice');
    if (saved && [...voiceSelect.options].some(o=>o.value===saved)){
      voiceSelect.value = saved;
    } else {
      const firstEn = sorted.find(v=>v.lang.startsWith('en'));
      if (firstEn) voiceSelect.value = firstEn.name;
    }
  }
  function getSelectedVoice(){
    const name = voiceSelect.value;
    return speechSynthesis.getVoices().find(v=>v.name===name) || null;
  }
  function speak(text){
    if (!("speechSynthesis" in window)) {
      alert("–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —ç—Ç–æ—Ç –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–∑–≤—É—á–∫—É (SpeechSynthesis).");
      return;
    }
    speechSynthesis.cancel();
    const u = new SpeechSynthesisUtterance(text);
    const v = getSelectedVoice();
    if (v) u.voice = v;
    if (!v || !/^en/i.test(v.lang)) u.lang = "en-US";
    u.rate = parseFloat(rate.value);
    u.pitch = parseFloat(pitch.value);
    speechSynthesis.speak(u);
  }
  voiceSelect.addEventListener('change', ()=> {
    localStorage.setItem('th-bingo-voice', voiceSelect.value);
  });
  testBtn.addEventListener('click', ()=> speak("thin, then, this"));

  populateVoices();
  window.speechSynthesis.onvoiceschanged = populateVoices;

  // ‚Äî‚Äî‚Äî‚Äî‚Äî –î–æ—Å–∫–∞ ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
  function shuffle(arr){
    const a = arr.slice();
    for (let i=a.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1));
      [a[i],a[j]]=[a[j],a[i]];
    }
    return a;
  }

  function generateBoard(){
    BOARD.innerHTML = "";
    const pool = shuffle(WORDS); // –≤—Å–µ 25
    for (let i=0;i<25;i++){
      const item = pool[i];
      const btn = document.createElement('button');
      btn.className = "cell";
      btn.setAttribute("role","gridcell");
      btn.setAttribute("aria-pressed","false");
      btn.textContent = item.w;
      btn.dataset.word = item.w;
      btn.dataset.sound = item.s;
      btn.classList.add(item.s);

      const badge = document.createElement('span');
      badge.className = "small";
      badge.textContent = item.s === "voiced" ? "√∞" : "Œ∏";
      btn.appendChild(badge);

      btn.addEventListener('click', (e)=>{
        e.preventDefault();
        speak(item.w);
        toggleMark(btn);
      });
      btn.addEventListener('contextmenu', (e)=>{
        e.preventDefault();
        toggleMark(btn);
      });
      BOARD.appendChild(btn);
    }
  }

  function toggleMark(el){
    el.classList.toggle('marked');
    const marked = el.classList.contains('marked');
    el.setAttribute('aria-pressed', marked ? 'true':'false');
  }

  shuffleBtn.addEventListener('click', generateBoard);
  resetBtn.addEventListener('click', ()=>{
    document.querySelectorAll('.cell').forEach(c=>{
      c.classList.remove('marked');
      c.setAttribute('aria-pressed','false');
    });
  });

  generateBoard();
</script>
</body>
</html>
